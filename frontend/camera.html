<video id="video" width="320" height="240" autoplay></video>
<button id="snap">Capture</button>
<canvas id="canvas" width="320" height="240" style="display:none;"></canvas>
<script>
navigator.mediaDevices.getUserMedia({ video: true })
  .then(stream => { document.getElementById('video').srcObject = stream; });

document.getElementById('snap').onclick = function() {
    const canvas = document.getElementById('canvas');
    const video = document.getElementById('video');
    canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);
    canvas.toBlob(function(blob) {
        let formData = new FormData();
        formData.append('photo', blob, 'capture.png');
        fetch('http://localhost:5000/upload', {
  method: 'POST',
  body: formData
})
.then(response => 
    response.json())
.then(data => {
    console.log(data)
  if(data.error){
    alert('Error: ' + data.error);
  } else {
    alert('Extracted text:\n' + data.text);
  }
})
.catch(error => alert("Error: " + error));

    })
    
};
</script>
